[{"D:\\workspace\\a\\bbb\\react-app\\src\\index.js":"1","D:\\workspace\\a\\bbb\\react-app\\src\\App.js":"2","D:\\workspace\\a\\bbb\\react-app\\src\\reportWebVitals.js":"3","D:\\workspace\\a\\bbb\\react-app\\src\\pages\\login\\index.js":"4","D:\\workspace\\a\\bbb\\react-app\\src\\pages\\home\\index.js":"5","D:\\workspace\\a\\bbb\\react-app\\src\\components\\header\\index.js":"6","D:\\workspace\\a\\bbb\\react-app\\src\\components\\clicle-btn\\index.js":"7"},{"size":516,"mtime":1609991154661,"results":"8","hashOfConfig":"9"},{"size":551,"mtime":1609749171637,"results":"10","hashOfConfig":"9"},{"size":362,"mtime":1609744209976,"results":"11","hashOfConfig":"9"},{"size":552,"mtime":1609751752183,"results":"12","hashOfConfig":"9"},{"size":1685,"mtime":1610086186182,"results":"13","hashOfConfig":"9"},{"size":365,"mtime":1609751766532,"results":"14","hashOfConfig":"9"},{"size":3207,"mtime":1610090514742,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},"g4zdph",{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"18"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"18"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33"},"D:\\workspace\\a\\bbb\\react-app\\src\\index.js",[],["34","35"],"D:\\workspace\\a\\bbb\\react-app\\src\\App.js",[],"D:\\workspace\\a\\bbb\\react-app\\src\\reportWebVitals.js",[],"D:\\workspace\\a\\bbb\\react-app\\src\\pages\\login\\index.js",[],"D:\\workspace\\a\\bbb\\react-app\\src\\pages\\home\\index.js",["36","37"],"import React, { Fragment, useEffect, useReducer, useRef, useState } from \"react\";\r\nimport Header from \"../../components/header\";\r\nimport ClicleBtn from \"../../components/clicle-btn\";\r\n// import { DndProvider, useDrop } from \"react-dnd\";\r\n// import { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport \"./index.styl\";\r\n\r\nfunction handleClick() {\r\n  console.log(this);\r\n  this.history.push(\"/login\");\r\n}\r\n\r\n// let Wrap = () => {\r\n//   // let [, drop] = useDrop({\r\n//   //   accept: \"app\",\r\n//   // });\r\n//   return;\r\n// };\r\n\r\nlet Home = (props) => {\r\n\r\n  let wrapRef = useRef()\r\n  let [bound,setBound] = useState(0)\r\n  // let [b,cb] = useReducer((data,action) => {\r\n  //   console.log(data)\r\n  //   return action\r\n  // },0)\r\n\r\n  useEffect(() => {\r\n    let {offsetTop:top,offsetLeft:left,offsetHeight:height,offsetWidth:width}=wrapRef.current\r\n    setBound({top,left,width,height})\r\n    console.log(wrapRef,1,wrapRef.current.getBoundingClientRect().top,wrapRef.current.offsetTop)\r\n  },[])\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"home-page\">\r\n        <Header />\r\n        {/* <button onClick={()=> ca(a+1)}>{a}</button> */}\r\n        {/* <button onClick={()=> cb(b+1)}>{b}</button> */}\r\n        {/* <div className=\"center\"> */}\r\n        <div className=\"preview\"></div>\r\n        <div className=\"center-wrap\" ref={wrapRef}>\r\n          <ClicleBtn bound={bound} />\r\n        </div>\r\n        {/* <DndProvider backend={HTML5Backend}>\r\n          <div>\r\n\r\n          <Wrap />\r\n          </div>\r\n        </DndProvider> */}\r\n        {/* </div> */}\r\n      </div>\r\n      {/* <button onClick={handleClick.bind(props)}>click</button> */}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","D:\\workspace\\a\\bbb\\react-app\\src\\components\\header\\index.js",["38"],"import React, { Fragment } from 'react'\r\nimport './index.styl'\r\n\r\nfunction handleClick(){\r\n    console.log(this)\r\n    this.history.push('/login')\r\n}\r\n\r\nlet Header = (props) => {\r\n\r\n    return (\r\n        <Fragment>           \r\n            <div className='container'>\r\n                header\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Header","D:\\workspace\\a\\bbb\\react-app\\src\\components\\clicle-btn\\index.js",["39","40","41","42","43","44","45"],"import React, { Fragment, useEffect, useReducer, useRef, useState } from \"react\";\r\n// import { useDrag } from 'react-dnd'\r\nimport \"./index.styl\";\r\n\r\nlet timer\r\n\r\nlet data = [\r\n  {\r\n    to: \"编 辑\",\r\n    name: \"菜 单\",\r\n    list: [\"主页\", \"上传\", \"预览\", \"文件\", \"模板\"],\r\n  },\r\n  {\r\n    name: \"编 辑\",\r\n    to: \"菜 单\",\r\n    list: [\"背景\", \"图片\", \"按钮\", \"视频\", \"文字\"],\r\n  },\r\n];\r\nlet ClicleBtn = (props) => {\r\n  let {bound} = props\r\n  let [mouseStatus, setMouseStatus] = useState(0)\r\n\r\n  //init\r\n  useEffect(() => {\r\n    window.onmouseup=(e) => {\r\n      console.log('mouseup',mouseStatus)\r\n      console.log('xx')\r\n      \r\n      setMouseStatus(0);\r\n      if(mouseStatus>0){\r\n        e.preventdefault()\r\n        reducerStart(null)\r\n        return false\r\n      }\r\n      \r\n    }\r\n  },[])\r\n\r\n  //容器\r\n  let wrapRef = useRef()\r\n  // 按钮内容状态\r\n  let [btnStatus, setBtnStatus] = useState(0)\r\n  // 按钮显示状态\r\n  let [btnHide, reducerBtnHide] = useReducer(function(prev,e){\r\n    let {top,left,right,bottom,width,height} = props.bound\r\n    let {top:eTop,left:eLeft,width: eWidth,height: eHeight} = e.target.getBoundingClientRect()\r\n    let origin={\r\n      x:eLeft+eWidth/2,\r\n      y:eTop+eHeight/2\r\n    }\r\n    let x = origin.x-left\r\n    let y = origin.y-top\r\n\r\n    //靠在left\r\n    if(x<width/2&&x<y){\r\n      //\r\n      return 'active-3'\r\n    }\r\n    //靠在top\r\n    if(y<height/2&&x>=y){\r\n      //\r\n      return 'active-0'\r\n    }\r\n    //靠在right\r\n    if(x>=width/2&&x<y){\r\n      //\r\n      return 'active-1'\r\n    }\r\n    //靠在left\r\n    if(y>=height/2&&x>=y){\r\n      //\r\n      return 'active-2'\r\n    }\r\n\r\n    console.log(this,props,e,)\r\n  },'')\r\n  // 拖拽\r\n  let [startBound,reducerStart] = useReducer((prev,next) => {\r\n    console.log(prev,next,wrapRef)\r\n    if(prev&&next){\r\n      let {x,y} = prev\r\n      let {x:nx,y:ny} = next\r\n      console.log(wrapRef.current)\r\n      let {offsetTop,offsetLeft,offsetHeight,offsetWidth}= wrapRef.current\r\n      let top = (ny-y)+offsetTop\r\n      let left = (nx-x)+offsetLeft\r\n      top = top < 0?0:top>bound.height?bound.height:top\r\n      wrapRef.current.style.top = top+'px'\r\n      console.log(123,ny,y,offsetTop,wrapRef.current.style.top)\r\n      wrapRef.current.style.left = left < 0?'0px':left>bound.width?bound.width+'px':left+'px'\r\n    }\r\n    return {...next}\r\n  },null)\r\n\r\n  let draging = (e) => {\r\n    if(!mouseStatus){return}\r\n    console.log(mouseStatus)\r\n    let now = Date.now()\r\n    // if(timer&&now-timer<1000){ return }\r\n    timer = now\r\n    let{clientX:x,clientY:y} = e\r\n    reducerStart({x,y})\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div ref={wrapRef} className={\"c-wrap \"+btnHide} onMouseMove={draging}  onMouseDown={() => {setMouseStatus(1)}}>\r\n        <div className=\"title\" onClick={function(e){ !btnHide? reducerBtnHide(e): setBtnStatus(btnStatus?0:1)}}>{data[btnStatus].to}</div>\r\n        <ul className=\"l-wrap\">\r\n          {data[btnStatus].list.map((val, index) => {\r\n            return (\r\n              <li key={index}>\r\n                <span>{val}</span>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ClicleBtn;\r\n",{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","severity":1,"message":"51","line":1,"column":38,"nodeType":"52","messageId":"53","endLine":1,"endColumn":48},{"ruleId":"50","severity":1,"message":"54","line":8,"column":10,"nodeType":"52","messageId":"53","endLine":8,"endColumn":21},{"ruleId":"50","severity":1,"message":"54","line":4,"column":10,"nodeType":"52","messageId":"53","endLine":4,"endColumn":21},{"ruleId":"55","severity":1,"message":"56","line":37,"column":5,"nodeType":"57","endLine":37,"endColumn":7,"suggestions":"58"},{"ruleId":"50","severity":1,"message":"59","line":45,"column":19,"nodeType":"52","messageId":"53","endLine":45,"endColumn":24},{"ruleId":"50","severity":1,"message":"60","line":45,"column":25,"nodeType":"52","messageId":"53","endLine":45,"endColumn":31},{"ruleId":"50","severity":1,"message":"61","line":78,"column":8,"nodeType":"52","messageId":"53","endLine":78,"endColumn":18},{"ruleId":"50","severity":1,"message":"62","line":84,"column":33,"nodeType":"52","messageId":"53","endLine":84,"endColumn":45},{"ruleId":"50","severity":1,"message":"63","line":84,"column":46,"nodeType":"52","messageId":"53","endLine":84,"endColumn":57},{"ruleId":"50","severity":1,"message":"64","line":100,"column":5,"nodeType":"52","messageId":"53","endLine":100,"endColumn":10},"no-native-reassign",["65"],"no-negated-in-lhs",["66"],"no-unused-vars","'useReducer' is defined but never used.","Identifier","unusedVar","'handleClick' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'mouseStatus'. Either include it or remove the dependency array.","ArrayExpression",["67"],"'right' is assigned a value but never used.","'bottom' is assigned a value but never used.","'startBound' is assigned a value but never used.","'offsetHeight' is assigned a value but never used.","'offsetWidth' is assigned a value but never used.","'timer' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"68","fix":"69"},"Update the dependencies array to be: [mouseStatus]",{"range":"70","text":"71"},[757,759],"[mouseStatus]"]